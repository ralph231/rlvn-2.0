<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keep Notes</title>
    <link rel="stylesheet" href="/keepnote.css">
</head>
<body>
    <div class="container">
        <!-- Dark Mode Toggle Button with Smooth Icon Change -->
        <div class="dark-mode-toggle-container">
            <button class="dark-mode-toggle" id="dark-mode-toggle" onclick="toggleDarkMode()">üåô</button>
        </div>

        <h1 class="page-title">Keep Notes</h1>

        <!-- Floating Button to Navigate to Note Upload Page -->
        <div class="floating-button-container">
            <a href="/noteupload" class="upload-button">Ôºã</a>
        </div>

        <!-- Notes Grid with 3D Effect -->
        <div class="notes-grid">
            <% notes.forEach(note => { %>
                <div class="note-item">
                    <% if (note.imageUrl) { %>
                        <div class="image-container">
                            <img src="/uploads/<%= note.imageUrl %>" alt="Note Image" class="note-image" onclick="openFullscreenImage('/uploads/<%= note.imageUrl %>')">
                        </div>
                    <% } %>
                    <div class="note-text-content">
                        <h2><%= note.title %></h2>
                        <p><%= note.content %></p>
                        <small><%= new Date(note.date).toLocaleDateString() %></small>
                    </div>

                    <!-- Delete Button with Icon -->
                    <form action="/notes/delete/<%= note._id %>" method="POST" class="delete-form">
                        <button type="submit" class="delete-button">üóë</button>
                    </form>
                </div>
            <% }) %>
        </div>
    </div>

    <!-- Fullscreen Modal for Image Preview -->
    <div id="fullscreen-modal" class="fullscreen-modal" onclick="closeFullscreen()">
        <span id="close-modal" class="close">&times;</span>
        <img id="fullscreen-img" class="fullscreen-content">
    </div>

    <script>
        // Dark Mode Toggle Functionality
        function toggleDarkMode() {
            const body = document.body;
            const toggleButton = document.getElementById('dark-mode-toggle');
            const isDarkMode = body.classList.toggle('dark-mode');
            toggleButton.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkModePreference', isDarkMode ? 'enabled' : 'disabled');
        }

        // Apply saved dark mode preference on load
        window.onload = () => {
            const darkModePreference = localStorage.getItem('darkModePreference');
            if (darkModePreference === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('dark-mode-toggle').textContent = '‚òÄÔ∏è';
            }
        };

        // Fullscreen image functionality
        function openFullscreenImage(imageUrl) {
            const modal = document.getElementById('fullscreen-modal');
            const fullscreenImg = document.getElementById('fullscreen-img');
            fullscreenImg.src = imageUrl;
            modal.style.display = 'flex';
        }

        function closeFullscreen() {
            const modal = document.getElementById('fullscreen-modal');
            modal.style.display = 'none';
        }
    </script>
</body>
</html>

