<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keep Notes</title>
    <link rel="stylesheet" href="/keepnote.css">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <h1>Keep Notes</h1>

        <!-- Button to Navigate to Note Upload Page -->
        <div style="text-align: right; margin-bottom: 20px;">
            <a href="/noteupload" class="upload-button">Create New Note</a>
        </div>

        <!-- Notes Grid -->
        <div class="notes-grid">
            <% notes.forEach(note => { %>
                <div class="note-item">
                    <% if (note.imageUrl) { %>
                        <img src="/uploads/<%= note.imageUrl %>" alt="Note Image" onclick="openFullscreenImage('/uploads/<%= note.imageUrl %>')">
                    <% } %>
                    <h2><%= note.title %></h2>
                    <p><%= note.content %></p>
                    <small><%= new Date(note.date).toLocaleDateString() %></small>

                    <!-- Delete Button for Each Note -->
                    <form action="/notes/delete/<%= note._id %>" method="POST" style="margin-top: 10px;">
                        <button type="submit" class="delete-button">Delete</button>
                    </form>
                </div>
            <% }) %>
        </div>
    </div>

    <!-- Fullscreen Modal for Image Preview -->
    <div id="fullscreen-modal" class="fullscreen-modal" onclick="closeFullscreen()">
        <span id="close-modal" class="close">&times;</span>
        <img id="fullscreen-img" class="fullscreen-content">
    </div>

    <script>
        function openFullscreenImage(imageUrl) {
            const modal = document.getElementById('fullscreen-modal');
            const fullscreenImg = document.getElementById('fullscreen-img');
            fullscreenImg.src = imageUrl;
            modal.style.display = 'flex';
        }

        function closeFullscreen() {
            const modal = document.getElementById('fullscreen-modal');
            modal.style.display = 'none';
        }
    </script>
</body>
</html>
